const year = [
  {video : '', image : ['']}, //2012
  {video : '', image : ['']}, //2013
  {video : '', image : ['']}, //2014
  {video : '', image : ['']}, //2015
  {video : 'https://www.youtube.com/embed/kth-1lg388o?si=YgRfYM9tbTqbo0xH', image : ['images/archives/2016/1.jpg','images/archives/2016/2.jpg','images/archives/2016/3.jpg','images/archives/2016/4.jpg','images/archives/2016/5.jpg','images/archives/2016/6.jpg','images/archives/2016/7.jpg','images/archives/2016/8.jpg','images/archives/2016/9.jpg','images/archives/2016/10.jpg','images/archives/2016/11.jpg','images/archives/2016/12.jpg','images/archives/2016/13.jpg','images/archives/2016/14.jpg','images/archives/2016/15.jpg','images/archives/2016/16.jpg','images/archives/2016/17.jpg','images/archives/2016/18.jpg','images/archives/2016/19.jpg','images/archives/2016/20.jpg','images/archives/2016/21.jpg','images/archives/2016/22.jpg','images/archives/2016/23.jpg','images/archives/2016/24.jpg','images/archives/2016/25.jpg','images/archives/2016/26.jpg','images/archives/2016/27.jpg','images/archives/2016/28.jpg','images/archives/2016/29.jpg','images/archives/2016/30.jpg','images/archives/2016/31.jpg','images/archives/2016/32.jpg','images/archives/2016/33.jpg','images/archives/2016/34.jpg','images/archives/2016/35.jpg','images/archives/2016/36.jpg','images/archives/2016/37.jpg','images/archives/2016/38.jpg','images/archives/2016/39.jpg','images/archives/2016/40.jpg','images/archives/2016/41.jpg','images/archives/2016/42.jpg','images/archives/2016/43.jpg','images/archives/2016/44.jpg','images/archives/2016/45.jpg','images/archives/2016/46.jpg','images/archives/2016/47.jpg','images/archives/2016/48.jpg','images/archives/2016/49.jpg','images/archives/2016/50.jpg','images/archives/2016/51.jpg','images/archives/2016/52.jpg','images/archives/2016/53.jpg','images/archives/2016/54.jpg','images/archives/2016/55.jpg','images/archives/2016/56.jpg','images/archives/2016/57.jpg','images/archives/2016/58.jpg','images/archives/2016/59.jpg','images/archives/2016/60.jpg','images/archives/2016/61.jpg','images/archives/2016/62.jpg','images/archives/2016/63.jpg','images/archives/2016/64.jpg','images/archives/2016/65.jpg','images/archives/2016/66.jpg','images/archives/2016/67.jpg','images/archives/2016/68.jpg','images/archives/2016/69.jpg','images/archives/2016/70.jpg','images/archives/2016/71.jpg','images/archives/2016/72.jpg','images/archives/2016/73.jpg','images/archives/2016/74.jpg','images/archives/2016/75.jpg','images/archives/2016/76.jpg','images/archives/2016/77.jpg','images/archives/2016/78.jpg','images/archives/2016/79.jpg']}, //2016
  {video : 'https://www.youtube.com/embed/jsin-3UoWaE?si=iMjQ9IcUXFju0qv2', image : ['']}, //2017
  {video : 'https://www.youtube.com/embed/kKRRPDeCWyg?si=cTequjZnyDmwLpk1', image : ['']}, //2018
  {video : 'https://www.youtube.com/embed/NPdYR4oyjlk?si=Y2L6G9EePLWanj0K', image : ['']}, //2019
  {video : '', image : ['']}, //2020
  {video : '', image : ['']}, //2021
  {video : 'https://www.youtube.com/embed/E9e9A9aWZKM?si=jOOfFQOeDNHClcVr', image : ['images/archives/2022/1.jpg','images/archives/2022/2.jpg','images/archives/2022/3.jpg','images/archives/2022/4.jpg','images/archives/2022/5.jpg','images/archives/2022/6.jpg','images/archives/2022/7.jpg','images/archives/2022/8.jpg','images/archives/2022/9.jpg','images/archives/2022/10.jpg','images/archives/2022/11.jpg','images/archives/2022/12.jpg','images/archives/2022/13.jpg','images/archives/2022/14.jpg','images/archives/2022/15.jpg','images/archives/2022/16.jpg','images/archives/2022/17.jpg','images/archives/2022/18.jpg','images/archives/2022/19.jpg','images/archives/2022/20.jpg','images/archives/2022/21.jpg','images/archives/2022/22.jpg','images/archives/2022/23.jpg','images/archives/2022/24.jpg',
  'images/archives/2022/25.jpg','images/archives/2022/26.jpg','images/archives/2022/27.jpg','images/archives/2022/28.jpg','images/archives/2022/29.jpg','images/archives/2022/30.jpg','images/archives/2022/31.jpg','images/archives/2022/32.jpg','images/archives/2022/33.jpg','images/archives/2022/34.jpg','images/archives/2022/35.jpg','images/archives/2022/36.jpg','images/archives/2022/37.jpg','images/archives/2022/38.jpg','images/archives/2022/39.jpg','images/archives/2022/40.jpg','images/archives/2022/41.jpg','images/archives/2022/42.jpg','images/archives/2022/43.jpg','images/archives/2022/44.jpg','images/archives/2022/45.jpg','images/archives/2022/46.jpg','images/archives/2022/47.jpg','images/archives/2022/48.jpg','images/archives/2022/49.jpg','images/archives/2022/50.jpg','images/archives/2022/51.jpg','images/archives/2022/52.jpg','images/archives/2022/53.jpg','images/archives/2022/54.jpg','images/archives/2022/55.jpg','images/archives/2022/56.jpg','images/archives/2022/57.jpg','images/archives/2022/58.jpg','images/archives/2022/59.jpg','images/archives/2022/60.jpg','images/archives/2022/61.jpg','images/archives/2022/62.jpg','images/archives/2022/63.jpg','images/archives/2022/64.jpg','images/archives/2022/65.jpg','images/archives/2022/66.jpg','images/archives/2022/67.jpg','images/archives/2022/68.jpg','images/archives/2022/69.jpg','images/archives/2022/70.jpg','images/archives/2022/71.jpg','images/archives/2022/72.jpg','images/archives/2022/73.jpg','images/archives/2022/74.jpg','images/archives/2022/75.jpg','images/archives/2022/76.jpg','images/archives/2022/77.jpg','images/archives/2022/78.jpg','images/archives/2022/79.jpg','images/archives/2022/80.jpg','images/archives/2022/81.jpg','images/archives/2022/82.jpg','images/archives/2022/83.jpg','images/archives/2022/84.jpg','images/archives/2022/85.jpg','images/archives/2022/86.jpg','images/archives/2022/87.jpg','images/archives/2022/88.jpg','images/archives/2022/89.jpg','images/archives/2022/90.jpg','images/archives/2022/91.jpg','images/archives/2022/92.jpg','images/archives/2022/93.jpg','images/archives/2022/94.jpg','images/archives/2022/95.jpg','images/archives/2022/96.jpg','images/archives/2022/97.jpg','images/archives/2022/98.jpg','images/archives/2022/99.jpg','images/archives/2022/100.jpg']}, //2022
  {video : 'https://www.youtube.com/embed/lCItTjEyGbY?si=7r0C6eisfakDDYwc', image : ['']}, //2023
]


const startDate = new Date("2012-01-01");
const endDate = new Date("2023-01-01");
const totalYears = 11;
const pixelsPerYear = 50;
const totalWidth = 80 + "px";

const timeline = document.getElementById("timeline");
timeline.style.width = totalWidth + "px";
for (let i = 0; i <= totalYears; i++) {
  const event = document.createElement("div");
  const eventYear = document.createElement("p");
  event.classList.add("event");
  event.appendChild(eventYear);
  eventYear.classList.add("years");

  // CALCUL DE LA POSITION EN FONCTION DE L'ANNÉÉ ACTUELLE
  const currentDate = new Date(startDate);
  currentDate.setFullYear(startDate.getFullYear() + i);
  eventYear.innerText = [currentDate][0].getFullYear([i]);
  eventYear.setAttribute("id", [currentDate][0].getFullYear([i]));

  // CALCUL DE LA POSITION EN POURCENTAGE
  const positionPercentage =
    ((currentDate - startDate) / (endDate - startDate)) * 95;

  // POSITIONNEMENT DE L'EVENEMENT SUR LA TIMELINE
  event.style.top = positionPercentage + "%";

  timeline.appendChild(event);

  //RECUPETATION DE L'ID DE L'ANNEE
  event.addEventListener("click", function () {
    let id = eventYear.getAttribute("id");
    changeYear(id);
  });
}

function changeYear(year) {
  // Logique de changement d'année ici
  console.log(`Changement vers l'année ${year}`);
  const section = 'year'+year;
  console.log(section);
  scrollToSection(section);
}

function createYearsCard(){
    allCards = document.querySelector('.all-cards')
    for(let i = 0; i <= totalYears; i++){
        const yearCard = document.createElement('div')
        yearCard.classList.add('year-card')
        yearCard.setAttribute('id', 'year'+(2012+i))
        const currentYear = document.createElement('h2')
        currentYear.innerText = 2012+i
        const yearContent = document.createElement('div')
        yearContent.classList.add('year-content')
        const teaser = document.createElement('iframe')
        teaser.setAttribute('src', year[i].video)
        if(year[i].video === ''){
          teaser.style.display = 'none'
        }
        if(window.innerWidth > 740){
          teaser.style.height = '400px'
        } else {
          teaser.style.height = "40%"
        }
        teaser.style.width = "calc(100% - 50px)"
        const caroussel = document.createElement('div')
        caroussel.classList.add('carousel')
        caroussel.setAttribute('id', 'carousel'+ (2012+i))
        for(let j = 0; j < year[i].image.length; j++){
          const slide = document.createElement('div')
          slide.classList.add('slide')
          const image = document.createElement('img')
          image.src = year[i].image[j]
          slide.appendChild(image)
          caroussel.appendChild(slide)
        }  

        yearCard.appendChild(currentYear)
        yearContent.appendChild(teaser)
        yearContent.appendChild(caroussel)
        yearCard.appendChild(yearContent)
        allCards.appendChild(yearCard)


    }
}
createYearsCard()

  const carousels = document.querySelectorAll(".carousel");
carousels.forEach((carousel) => {
  let slides = carousel.querySelectorAll(".slide");
  let currentSlide = 0;
  const totalSlides = slides.length;

  function showSlide(n) {
    setTimeout(() => {
      slides[currentSlide].style.display = "none";
      currentSlide = (n + totalSlides) % totalSlides;
      slides[currentSlide].style.display = "inline-block";
    }, 500);
  }

  function nextSlide() {
    showSlide(currentSlide + 1);
  }

  function previousSlide() {
    showSlide(currentSlide - 1);
  }

  // Show the initial slide
  showSlide(currentSlide);

  // Optionally, you can add interval for automatic sliding
  setInterval(() => nextSlide(carousel), 2000); // Change slide every 3 seconds
});


function scrollToSection(sectionId) {
  const section = document.getElementById(sectionId);
  console.log(section);
  section.scrollIntoView({ behavior: "smooth" });
}



